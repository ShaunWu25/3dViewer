;PROGRAM HEADER FOR PRINTING

;==================================
; PUT THIS CODE AT TOP OF PRINTING PROGRAM
;==================================

;THIS CODE WILL AUTOMATICALLY ROTATE C2 AXIS WHEN MACHINE IS MOVING AND EITHER AUTO_PRINT_SPEED OR PROG_PRINT_SPEED ARE ACTIVATED. 

;MIXER FACTOR
;ADJUST THIS NUMBER TO CHANGE SPEED OF MIXER RELATIVE TO PATH SPEED
DEFINE MIXER_FACTOR              AS R205
DEFINE _MIXER_FACTOR             AS $R205

DEFINE MIXER_ENABLE              AS $A_OUT[9]

MIXER_FACTOR=1000    ;ADJUST THIS


CANCEL(53,54)

RELEASE(C2)

IDS=53 WHENEVER (MIXER_ENABLE==TRUE) DO MOV[C2]=-1 FA[C2]=($AC_VACTW*360*_MIXER_FACTOR/(1000000))

IDS=54 EVERY (MIXER_ENABLE==FALSE) DO MOV[C2]=0 

;==================================

G0 G17 G40 G90 ; Rapid Traverse, XY Plane, Cancel Cutter Radius Compensation, Absolute Programming
N3 G500        ; Basic Work Offset
N4 CYCLE800()  ; Cancellation of CYCLE800 
N5 TRAFOOF     ; Cancellation of TRAORI
N5 TOROTOF     ; Cancellation of TOROT
N6 TRANS       ; Cancellation of Transformations
N7 ROT         ; Cancellation of Rotations

T0  ;No tool
D0  ;No Tool Offset;

;MOVE_CLEAR ;Uncomment for move-clear
;G53 G0 Z-100  ; Machine reference position in Z - no tool length
G53 G0 C0 B0  ; Machine reference position of B+C to zero

STOPRE

;CYCLE832(1,_ROUGH,1) ;High-speed settings: Roughing setting, 1mm tolerance
CTOL=10  ;Contour tolerance (mm) for continous path mode
;COMPCAD  ;Compressor on
;COMPOF  ;Compressor off - uncomment for compressor off
G54 G90  ; Programmable Work Offset
G0 X0 Y-0.02 Z20 C0 B0 ;Delete C2 
M28 ; PRINT_PUMP-ENABLE
M38 ; PUMP_SPEED_PROG_SEL
;M37 ; PUMP_SPEED_MANUAL_SEL
;M39 ; PUMP_SPEED_AUTO_SEL
MIXER_ENABLE=TRUE
R200=5  ; PUMP_SPEED

;TRAORI(2)   ; 5-axis transformation on (2) for printing, (1) for milling; Uncomment for TRAORI
;TANG(C2,X,Y,-1)
;TANGON(C2,0)
FFWON BRISK
G645     ;Continuous path mode
BSPLINE ;Spline interpolation all subsequent points
G91     ;Incremental mode
F10000  ;Feed-rate 

;==================================
; Body 
;==================================

G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.2 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.2 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X0 Y19.1 Z0 C0 B0 
G1 X318.42 Y-30.27 Z109.27 C0 B0 

;==================================
; Footer 
;==================================

STOPRE
FFWOF SOFT
;END OF PROGRAM
M29 ; PRINT_PUMP_DISABLE
MIXER_ENABLE=FALSE
;N281 G0 Z10
N282 CYCLE800(); Cancellation of CYCLE800
;N283 TRAFOOF; Cancellation of TRAORI
N284 TRANS; Cancellation of Transformations
N285 ROT; Cancellation of Rotations
N286 D0; Tool offset
N288 M30;Program End
N289 ;
